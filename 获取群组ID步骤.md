# 📱 获取Telegram群组ID - 详细步骤

## 方法1：使用脚本自动获取（推荐）

### 第1步：创建Telegram群组

1. **打开Telegram**
2. **点击左上角菜单** → **新建群组**
3. **输入群组名称**（例如：Web3管理员）
4. **点击"创建"**

### 第2步：添加Bot到群组

1. **在群组中**，点击右上角群组名称
2. **点击"添加成员"**
3. **搜索你的Bot**：`TRC200_bot`
4. **选择Bot并添加**

### 第3步：设置Bot为管理员

1. **在群组设置中**，点击"管理员"
2. **点击"添加管理员"**
3. **选择你的Bot**
4. **授予权限**：
   - ✅ 发送消息
   - ✅ 删除消息（可选）
5. **点击"完成"**

### 第4步：在群组发送消息

在群组中发送任意消息，例如：
```
测试
```

### 第5步：运行获取脚本

```bash
cd /Users/hack/AI招聘
source venv/bin/activate
python3 get_group_id.py
```

### 第6步：查看输出

你会看到类似这样的输出：
```
============================================================
📱 获取Telegram群组ID
============================================================

✅ Bot Token已配置

🔍 获取最近的更新...
✅ 找到 1 条更新

============================================================
📋 群组列表
============================================================

🏢 群组名称: Web3管理员
🆔 群组ID: -1001234567890
📝 类型: supergroup
------------------------------------------------------------

============================================================
✅ 请将上面的群组ID复制到 .env 文件中
============================================================

示例：
ADMIN_GROUP_ID=-1001234567890
```

### 第7步：复制群组ID

复制 `-1001234567890` 这样格式的ID（注意包含负号）

---

## 方法2：通过API手动获取

### 第1步：完成上面的1-4步

创建群组、添加Bot、设为管理员、发送消息

### 第2步：访问API链接

在浏览器中打开以下链接（替换`<你的BOT_TOKEN>`）：

```
https://api.telegram.org/bot<你的BOT_TOKEN>/getUpdates
```

**你的Bot Token：**
```
7751111095:AAGy0YC7sVndtxboAaKYm1P_WPDsip9XVx0
```

**完整链接：**
```
https://api.telegram.org/bot7751111095:AAGy0YC7sVndtxboAaKYm1P_WPDsip9XVx0/getUpdates
```

### 第3步：查找群组ID

在返回的JSON中找到类似这样的内容：
```json
{
  "message": {
    "chat": {
      "id": -1001234567890,
      "title": "Web3管理员",
      "type": "supergroup"
    }
  }
}
```

复制 `"id": -1001234567890` 中的数字（包含负号）

---

## 配置群组ID

### 编辑 .env 文件

```bash
# 打开 .env 文件
nano /Users/hack/AI招聘/.env
```

或使用任何文本编辑器

### 添加或修改这一行

```
ADMIN_GROUP_ID=-1001234567890
```

**注意：**
- 必须包含负号（-）
- 必须是 -100 开头的数字
- 不要有空格

### 保存并重启Bot

```bash
# 停止Bot
pkill -f tg_bot_v2.py

# 重新启动
cd /Users/hack/AI招聘
source venv/bin/activate
python3 tg_bot_v2.py > bot.log 2>&1 &
```

---

## 验证配置

### 检查环境变量

```bash
cd /Users/hack/AI招聘
source venv/bin/activate
python3 -c "
import os
from dotenv import load_dotenv
load_dotenv()
group_id = os.getenv('ADMIN_GROUP_ID')
if group_id:
    print(f'✅ 群组ID已配置: {group_id}')
else:
    print('❌ 群组ID未配置')
"
```

### 测试通知功能

1. **用另一个Telegram账号**向Bot发送消息
2. **提供钱包地址**
3. **查看管理员群组**是否收到通知

---

## 常见问题

### Q1: 脚本显示"没有找到任何更新"

**解决方案：**
1. 确认Bot已添加到群组
2. 在群组中发送消息
3. 等待几秒后再运行脚本

### Q2: 群组ID格式不对

**正确格式：**
- ✅ `-1001234567890` （负号 + 100开头）
- ❌ `1001234567890` （缺少负号）
- ❌ `-123456789` （不是100开头）

### Q3: Bot无法发送消息到群组

**检查：**
1. Bot是否在群组中
2. Bot是否为管理员
3. Bot是否有"发送消息"权限

---

## 快速测试命令

```bash
# 一键获取群组ID
cd /Users/hack/AI招聘 && source venv/bin/activate && python3 get_group_id.py
```

---

现在请按照上面的步骤操作，然后告诉我你获取到的群组ID是什么。

