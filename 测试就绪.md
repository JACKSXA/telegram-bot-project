# ✅ Bot V2 测试就绪！

## 🎉 当前状态

### ✅ 环境准备完成

- [x] ✅ Python 3.13.2
- [x] ✅ 虚拟环境创建
- [x] ✅ 所有依赖安装
- [x] ✅ Solana库测试通过
- [x] ✅ Bot Token配置
- [x] ✅ DeepSeek API配置
- [x] ✅ **Bot已启动并运行中** 🚀

---

## 📱 立即开始测试

### 第1步：打开Telegram

在Telegram中搜索你的Bot：
```
@TRC200_bot
```

或直接访问：
```
https://t.me/TRC200_bot
```

---

### 第2步：发送启动命令

```
/start
```

---

### 第3步：预期看到

```
🎉 欢迎使用Web3量化套利系统！

请选择您的语言 / Please choose your language:

[中文 🇨🇳]  [English 🇺🇸]
```

---

## 🧪 测试清单

### 基础功能（必测）

#### 1. 语言选择
- [ ] 点击"中文"按钮
- [ ] 看到中文提示
- [ ] 点击"English"按钮
- [ ] 看到英文提示

#### 2. 地址验证（中文模式）
- [ ] 选择中文
- [ ] 发送有效地址：`7xKXtg2CWhyXL1kVHBfJfHHhbhRQPdVvEULM35qJtaXE`
- [ ] 看到"正在查询"提示
- [ ] 收到余额信息

#### 3. 错误处理
- [ ] 发送无效地址：`invalid_address`
- [ ] 收到错误提示

#### 4. AI对话
- [ ] 发送消息：`这个怎么操作？`
- [ ] 收到AI的中文回复

---

## 🔍 测试用例

### 测试用例1：中文全流程

```
你：/start
Bot：[显示语言选择]

你：[点击 中文]
Bot：✅ 语言已设置为中文
     📝 请提供您的 SOL 链钱包地址

你：7xKXtg2CWhyXL1kVHBfJfHHhbhRQPdVvEULM35qJtaXE
Bot：🔍 正在链上查询...
     ✅ 地址验证成功！
     💰 余额：0.0000 SOL

你：这个怎么操作？
Bot：[AI中文回复]
```

---

### 测试用例2：英文全流程

```
你：/reset
Bot：会话已重置

你：/start
Bot：[显示语言选择]

你：[点击 English]
Bot：✅ Language set to English
     📝 Please provide your SOL wallet address

你：7xKXtg2CWhyXL1kVHBfJfHHhbhRQPdVvEULM35qJtaXE
Bot：🔍 Checking your wallet...
     ✅ Address verified successfully!
     💰 Balance: 0.0000 SOL

你：How does this work?
Bot：[AI英文回复]
```

---

### 测试用例3：地址验证

#### 有效地址测试
```
测试地址1: 7xKXtg2CWhyXL1kVHBfJfHHhbhRQPdVvEULM35qJtaXE
预期：✅ 验证通过

测试地址2: Gx2Jf8p5vVQDWAKwF3L6DnUEBz7TmC8Ks9V4RqH1PnYt
预期：✅ 验证通过
```

#### 无效地址测试
```
测试地址1: invalid_address
预期：❌ 格式错误

测试地址2: 0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb
预期：❌ 格式错误（以太坊地址）

测试地址3: 123
预期：❌ 格式错误（太短）
```

---

## 🎯 功能验证

### ✅ 已实现的功能

| 功能 | 状态 | 说明 |
|------|------|------|
| **双语言支持** | ✅ | 中英文自动切换 |
| **地址验证** | ✅ | Base58格式检查 |
| **链上查询** | ✅ | Solana RPC查询 |
| **余额显示** | ✅ | 实时SOL余额 |
| **AI对话** | ✅ | DeepSeek智能回复 |
| **错误处理** | ✅ | 友好错误提示 |
| **会话管理** | ✅ | 状态保持 |

### ⏸️ 需要额外配置的功能

| 功能 | 状态 | 说明 |
|------|------|------|
| **存款监控** | ⏸️ | 需要有余额的钱包 |
| **管理员通知** | ⏸️ | 需要配置群组ID |

---

## 📊 性能监控

### 查看Bot日志

```bash
# 方法1：查看后台进程输出
ps aux | grep tg_bot_v2

# 方法2：如果有日志文件
tail -f bot.log
```

### 停止Bot

```bash
# 找到进程ID
ps aux | grep tg_bot_v2 | grep -v grep

# 停止进程
kill <进程ID>

# 或者使用pkill
pkill -f tg_bot_v2.py
```

### 重启Bot

```bash
cd /Users/hack/AI招聘
source venv/bin/activate
python3 tg_bot_v2.py &
```

---

## 🐛 问题排查

### 如果Bot没有响应

1. **检查Bot是否运行**
   ```bash
   ps aux | grep tg_bot_v2
   ```

2. **检查网络连接**
   ```bash
   ping api.telegram.org
   ```

3. **查看错误日志**
   - 查看终端输出
   - 检查是否有异常信息

4. **重启Bot**
   ```bash
   pkill -f tg_bot_v2.py
   cd /Users/hack/AI招聘
   source venv/bin/activate
   python3 tg_bot_v2.py
   ```

---

### 如果地址查询失败

1. **测试Solana连接**
   ```bash
   cd /Users/hack/AI招聘
   source venv/bin/activate
   python3 test_solana.py
   ```

2. **检查网络**
   - 确认可以访问 `api.mainnet-beta.solana.com`

---

### 如果AI不回复

1. **检查API配额**
   - 访问 DeepSeek 控制台
   - 查看剩余额度

2. **验证API Key**
   ```bash
   python3 -c "import os; from dotenv import load_dotenv; load_dotenv(); print(os.getenv('DEEPSEEK_API_KEY')[:20])"
   ```

---

## 📞 配置管理员通知（可选）

如果你想启用管理员通知功能：

### 1. 创建管理员群组
- 打开Telegram
- 创建新群组
- 添加Bot到群组
- 设置Bot为管理员

### 2. 获取群组ID
```bash
cd /Users/hack/AI招聘
source venv/bin/activate
python3 get_group_id.py
```

### 3. 配置环境变量
编辑 `.env` 文件，添加：
```
ADMIN_GROUP_ID=-1001234567890
```

### 4. 重启Bot
```bash
pkill -f tg_bot_v2.py
python3 tg_bot_v2.py &
```

---

## 🎉 测试建议

### 推荐测试顺序

1. ✅ **基础功能**（5分钟）
   - 语言选择
   - 地址验证
   - 链上查询

2. ✅ **AI对话**（5分钟）
   - 中文对话
   - 英文对话
   - 剧本回复

3. ⏸️ **高级功能**（可选）
   - 存款监控
   - 管理员通知

---

## 📝 测试记录

### 日期：2025-10-27

| 测试项 | 结果 | 备注 |
|--------|------|------|
| Bot启动 | ✅ | 进程ID: 38659 |
| 环境配置 | ✅ | Token和API Key已配置 |
| Solana连接 | ✅ | 3/4测试通过 |
| 待测试... | ⬜ | 等待用户测试 |

---

## 🚀 开始测试！

**Bot已就绪，现在可以开始测试了！**

1. **打开Telegram**
2. **搜索：** `@TRC200_bot`
3. **发送：** `/start`
4. **享受测试！** 🎉

---

## 📋 快速命令参考

```bash
# 查看Bot状态
ps aux | grep tg_bot_v2

# 停止Bot
pkill -f tg_bot_v2.py

# 启动Bot
cd /Users/hack/AI招聘
source venv/bin/activate
python3 tg_bot_v2.py &

# 测试Solana
python3 test_solana.py

# 获取群组ID
python3 get_group_id.py

# 查看环境变量
python3 -c "from dotenv import load_dotenv; load_dotenv(); import os; print('Token:', bool(os.getenv('TELEGRAM_BOT_TOKEN'))); print('API Key:', bool(os.getenv('DEEPSEEK_API_KEY')))"
```

---

✅ **一切就绪！祝测试顺利！** 🎉

